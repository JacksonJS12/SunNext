@model SunNext.Web.ViewModels.SolarAssets.SolarAssetViewModel

@{
    ViewData["Title"] = "Asset Details";
}

<div class="container py-5">
    <div class="glass-card shadow-lg p-4">
        <div class="row">
            <div class="col-lg-7">
                <h2 class="glow-text mb-4">‚òÄÔ∏è @Model.Name</h2>

                <div class="row mb-4">
                    <div class="col-md-6 mb-3">
                        <div class="glass-card p-3">
                            <h5 class="text-info">‚ö°Ô∏è Power & Energy</h5>
                            <p><strong>Power:</strong> @Model.PowerKw kW</p>
                            <p><strong>Efficiency:</strong> @Model.EfficiencyPercent%</p>
                            <p><strong>Capacity:</strong> @Model.CapacityKw kWp</p>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="glass-card p-3">
                            <h5 class="text-info">üìä Energy Summary</h5>
                            <p><strong>Today:</strong> @Model.EnergyTodayKWh kWh</p>
                            <p><strong>This Month:</strong> @Model.EnergyMonthKWh kWh</p>
                            <p><strong>This Year:</strong> @Model.EnergyYearKWh kWh</p>
                            <p><strong>Total:</strong> @Model.EnergyTotalKWh kWh</p>
                        </div>
                    </div>
                </div>

                <div class="glass-card p-3 mb-4">
                    <h5 class="text-info">üìÑ Installer Info</h5>
                    <p><strong>Installer:</strong> @Model.InstallerName</p>
                    <p><strong>Email:</strong> @Model.InstallerEmail</p>
                    <p><strong>Phone:</strong> @Model.InstallerPhone</p>
                    <p><strong>Commissioned:</strong> @Model.CommissioningDate.ToString("yyyy-MM-dd")</p>
                </div>

                <div class="glass-card p-3">
                    <h5 class="text-info">üìç Location</h5>
                    <p><strong>Address:</strong> @Model.Address</p>
                    <p><strong>Time Zone:</strong> @Model.TimeZone</p>
                    <p><strong>Type:</strong> @Model.Type</p>
                </div>
            </div>

            <div class="col-lg-5">
                <div class="glass-card text-center mb-3">
                    <img src="@Model.ImageUrl" alt="Asset Image" class="img-fluid rounded shadow" />
                    <p class="mt-2 text-muted">Virtual Power Station</p>
                </div>

                <div class="glass-card p-3">
                    <h5 class="text-info">üìç Map</h5>
                    <div id="map" style="height: 300px;" class="rounded shadow"></div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <script>
        const map = L.map('map').setView([42.6975, 23.3242], 13); // Default location, replace if Model has Lat/Lng
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);
        L.marker([42.6975, 23.3242]).addTo(map)
            .bindPopup('Solar Asset Location')
            .openPopup();
    </script>
}
